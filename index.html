<html dir="rtl" lang="ar">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   نظام إدارة التعلم الإلكتروني (LMS)
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Cairo&amp;display=swap" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <style>
   body {
    font-family: 'Cairo', sans-serif;
  }
  /* Scrollbar for sidebar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-thumb {
    background-color: #a0aec0;
    border-radius: 3px;
  }
  </style>
 </head>
 <body class="bg-gray-50 min-h-screen flex flex-col">
  <!-- Authentication Screen -->
  <div class="min-h-screen flex flex-col justify-center items-center bg-gradient-to-tr from-blue-600 to-indigo-700 px-4" id="auth-screen">
   <div class="bg-white rounded-lg shadow-lg max-w-md w-full p-8">
    <h1 class="text-3xl font-bold mb-6 text-center text-gray-800">
     تسجيل الدخول / إنشاء حساب
    </h1>
    <form autocomplete="off" class="space-y-6" id="auth-form">
     <div>
      <label class="block mb-2 font-semibold text-gray-700" for="role">
       اختر الدور
      </label>
      <select class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="role" name="role" required="">
       <option disabled="" selected="" value="">
        اختر دورك
       </option>
       <option value="student">
        طالب
       </option>
       <option value="faculty">
        عضو هيئة تدريس
       </option>
       <option value="admin">
        إداري
       </option>
      </select>
     </div>
     <div>
      <label class="block mb-2 font-semibold text-gray-700" for="email">
       البريد الإلكتروني
      </label>
      <input class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="email" name="email" placeholder="example@domain.com" required="" type="email"/>
     </div>
     <div>
      <label class="block mb-2 font-semibold text-gray-700" for="password">
       كلمة المرور
      </label>
      <input class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="password" name="password" placeholder="********" required="" type="password"/>
     </div>
     <div class="flex justify-between items-center text-sm">
      <button class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition" type="submit">
       تسجيل الدخول
      </button>
      <button class="text-indigo-600 hover:underline" id="forgot-password-btn" type="button">
       نسيت كلمة المرور؟
      </button>
     </div>
    </form>
    <div class="hidden mt-6" id="forgot-password-section">
     <h2 class="text-xl font-semibold mb-3 text-gray-800">
      استعادة الحساب
     </h2>
     <form autocomplete="off" class="space-y-4" id="forgot-password-form">
      <div>
       <label class="block mb-2 font-semibold text-gray-700" for="forgot-email">
        أدخل بريدك الإلكتروني
       </label>
       <input class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="forgot-email" name="forgot-email" placeholder="example@domain.com" required="" type="email"/>
      </div>
      <div class="flex justify-between items-center">
       <button class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition" type="submit">
        إرسال رابط الاستعادة
       </button>
       <button class="text-indigo-600 hover:underline" id="back-to-login-btn" type="button">
        العودة لتسجيل الدخول
       </button>
      </div>
     </form>
    </div>
   </div>
  </div>
  <!-- Main App Container -->
  <div class="hidden flex-1 flex flex-col min-h-screen bg-gray-100" id="app">
   <!-- Top Navbar -->
   <header class="flex items-center justify-between bg-white shadow px-4 py-3 sticky top-0 z-30">
    <div class="flex items-center space-x-3 rtl:space-x-reverse">
     <button aria-label="Toggle Sidebar" class="text-gray-600 hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-md" id="sidebar-toggle">
      <i class="fas fa-bars fa-lg">
      </i>
     </button>
     <h1 class="text-xl font-bold text-indigo-700">
      نظام إدارة التعلم الإلكتروني (LMS)
     </h1>
    </div>
    <div class="flex items-center space-x-4 rtl:space-x-reverse">
     <button aria-label="الإشعارات" class="relative text-gray-600 hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-md" id="notifications-btn">
      <i class="fas fa-bell fa-lg">
      </i>
      <span class="absolute -top-1 -left-1 bg-red-600 text-white text-xs rounded-full px-1.5" id="notification-count">
       3
      </span>
     </button>
     <div class="relative">
      <button aria-label="قائمة المستخدم" class="flex items-center space-x-2 rtl:space-x-reverse focus:outline-none focus:ring-2 focus:ring-indigo-500 rounded-md" id="user-menu-btn">
       <img alt="صورة ملف المستخدم الدائري مع خلفية زرقاء وحرف U باللون الأبيض" class="rounded-full" height="40" src="https://storage.googleapis.com/a1aa/image/6c06ec28-727b-4d81-7240-56769c79da25.jpg" width="40"/>
       <span class="text-gray-700 font-semibold">
        صبري درهم
       </span>
       <i class="fas fa-chevron-down text-gray-500">
       </i>
      </button>
      <div class="hidden absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg py-1 z-40" id="user-menu">
       <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-100" href="#">
        الملف الشخصي
       </a>
       <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-100" href="#">
        الإعدادات
       </a>
       <button class="w-full text-right px-4 py-2 text-red-600 hover:bg-red-100" id="logout-btn">
        تسجيل الخروج
       </button>
      </div>
     </div>
    </div>
   </header>
   <div class="flex flex-1 overflow-hidden">
    <!-- Sidebar -->
    <aside class="bg-white w-72 border-l border-gray-200 flex flex-col overflow-y-auto transition-transform duration-300 ease-in-out rtl" id="sidebar" style="direction: rtl;">
     <nav class="flex-1 px-4 py-6 space-y-4">
      <!-- Sidebar content will be dynamically injected based on role -->
     </nav>
    </aside>
    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-6" id="main-content">
     <!-- Content will be dynamically injected based on role and selected menu -->
    </main>
   </div>
  </div>
  <script>
   // Elements
  const authScreen = document.getElementById('auth-screen');
  const app = document.getElementById('app');
  const authForm = document.getElementById('auth-form');
  const forgotPasswordBtn = document.getElementById('forgot-password-btn');
  const forgotPasswordSection = document.getElementById('forgot-password-section');
  const forgotPasswordForm = document.getElementById('forgot-password-form');
  const backToLoginBtn = document.getElementById('back-to-login-btn');
  const sidebarToggle = document.getElementById('sidebar-toggle');
  const sidebar = document.getElementById('sidebar');
  const mainContent = document.getElementById('main-content');
  const userMenuBtn = document.getElementById('user-menu-btn');
  const userMenu = document.getElementById('user-menu');
  const logoutBtn = document.getElementById('logout-btn');
  const notificationCount = document.getElementById('notification-count');

  // State
  let currentUser = null; // {role: 'student'|'faculty'|'admin', name: string}
  let sidebarOpen = true;
  let currentSidebarMenu = null;

  // Data for menus and content
  const menus = {
    faculty: [
      {
        title: 'لوحة التحكم الرئيسية',
        icon: 'tachometer-alt',
        key: 'dashboard',
        submenus: []
      },
      {
        title: 'إدارة المقررات الدراسية',
        icon: 'book',
        key: 'course-management',
        submenus: [
          { title: 'إنشاء وتحرير المحتوى', key: 'edit-content' },
          { title: 'جدولة المحاضرات والاختبارات', key: 'schedule' },
          { title: 'إدارة الواجبات والدرجات', key: 'assignments' },
          { title: 'التواصل مع الطلاب', key: 'communication' }
        ]
      },
      {
        title: 'التواصل والتفاعل',
        icon: 'comments',
        key: 'communication-main',
        submenus: [
          { title: 'إنشاء منتديات نقاش', key: 'forums' },
          { title: 'إرسال رسائل مباشرة أو جماعية', key: 'messages' },
          { title: 'نشر الإعلانات', key: 'announcements' }
        ]
      },
      {
        title: 'التقارير والتحليلات',
        icon: 'chart-bar',
        key: 'reports',
        submenus: [
          { title: 'تقارير أداء الطلاب', key: 'performance' },
          { title: 'تحليلات التفاعل والتقدم', key: 'analytics' }
        ]
      },
      {
        title: 'الدعم الفني',
        icon: 'life-ring',
        key: 'support',
        submenus: [
          { title: 'الأسئلة الشائعة', key: 'faq' },
          { title: 'نموذج تواصل مع فريق الدعم', key: 'contact-support' }
        ]
      }
    ],
    admin: [
      {
        title: 'لوحة التحكم الرئيسية',
        icon: 'tachometer-alt',
        key: 'dashboard',
        submenus: []
      },
      {
        title: 'إدارة المستخدمين',
        icon: 'users-cog',
        key: 'user-management',
        submenus: [
          { title: 'إضافة/تعديل/حذف حسابات', key: 'manage-accounts' },
          { title: 'إدارة الصلاحيات والأدوار', key: 'manage-roles' }
        ]
      },
      {
        title: 'إدارة المقررات الدراسية',
        icon: 'book',
        key: 'course-management',
        submenus: [
          { title: 'إضافة وتعديل المقررات', key: 'edit-courses' },
          { title: 'تعيين المدرّسين', key: 'assign-faculty' },
          { title: 'مراجعة جودة المحتوى', key: 'content-quality' }
        ]
      },
      {
        title: 'إدارة التقارير والتحليلات',
        icon: 'chart-bar',
        key: 'reports',
        submenus: [
          { title: 'إنشاء تقارير مخصصة', key: 'custom-reports' },
          { title: 'تحليل بيانات الأداء', key: 'performance-analysis' },
          { title: 'تصدير التقارير', key: 'export-reports' }
        ]
      },
      {
        title: 'إدارة النظام',
        icon: 'cogs',
        key: 'system-management',
        submenus: [
          { title: 'إعدادات النظام العامة', key: 'general-settings' },
          { title: 'صيانة وتحديثات', key: 'maintenance' },
          { title: 'إدارة قواعد البيانات', key: 'database-management' }
        ]
      },
      {
        title: 'الدعم الفني',
        icon: 'life-ring',
        key: 'support',
        submenus: [
          { title: 'متابعة طلبات الدعم', key: 'support-requests' },
          { title: 'إدارة الحلول التقنية', key: 'technical-solutions' }
        ]
      }
    ],
    student: [
      {
        title: 'لوحة التحكم الرئيسية',
        icon: 'tachometer-alt',
        key: 'dashboard',
        submenus: []
      },
      {
        title: 'الوصول إلى المحتوى الدراسي',
        icon: 'book-open',
        key: 'content-access',
        submenus: [
          { title: 'تصفح المحاضرات والفيديوهات', key: 'browse-lectures' },
          { title: 'تنزيل الملفات والمصادر', key: 'download-resources' },
          { title: 'متابعة تقدم الدروس', key: 'progress-tracking' }
        ]
      },
      {
        title: 'الواجبات والاختبارات',
        icon: 'clipboard-list',
        key: 'assignments-tests',
        submenus: [
          { title: 'عرض المهام والواجبات', key: 'view-tasks' },
          { title: 'رفع الملفات', key: 'upload-files' },
          { title: 'عرض الدرجات والملاحظات', key: 'grades-feedback' }
        ]
      },
      {
        title: 'التقويم الأكاديمي',
        icon: 'calendar-alt',
        key: 'academic-calendar',
        submenus: []
      },
      {
        title: 'التفاعل والتواصل',
        icon: 'comments',
        key: 'interaction',
        submenus: [
          { title: 'المشاركة في المنتديات', key: 'forums' },
          { title: 'التواصل مع المدرسين', key: 'contact-faculty' },
          { title: 'استلام الإعلانات', key: 'announcements' }
        ]
      },
      {
        title: 'الدعم الفني',
        icon: 'life-ring',
        key: 'support',
        submenus: [
          { title: 'الأسئلة الشائعة', key: 'faq' },
          { title: 'التواصل مع فريق الدعم', key: 'contact-support' }
        ]
      }
    ]
  };

  // Sample data for dashboard and content
  const sampleData = {
    faculty: {
      dashboard: {
        courses: [
          { id: 1, name: 'مقدمة في البرمجة', students: 45 },
          { id: 2, name: 'هياكل البيانات', students: 38 },
          { id: 3, name: 'قواعد البيانات', students: 50 }
        ],
        recentActivities: [
          { id: 1, text: 'تم رفع محاضرة جديدة في مقرر مقدمة في البرمجة', date: '2024-06-10' },
          { id: 2, text: 'تم جدولة اختبار منتصف الفصل لمقرر هياكل البيانات', date: '2024-06-09' },
          { id: 3, text: 'تم نشر إعلان جديد للطلاب', date: '2024-06-08' }
        ],
        notifications: [
          { id: 1, text: 'تحديث نظام LMS سيتم يوم الجمعة', date: '2024-06-07' },
          { id: 2, text: 'طلب دعم جديد من طالب محمد علي', date: '2024-06-06' }
        ]
      }
    },
    admin: {
      dashboard: {
        usersCount: 320,
        coursesCount: 45,
        notifications: [
          { id: 1, text: 'تم تحديث صلاحيات المستخدمين', date: '2024-06-10' },
          { id: 2, text: 'تم إضافة مقررات جديدة', date: '2024-06-09' }
        ]
      }
    },
    student: {
      dashboard: {
        enrolledCourses: [
          { id: 1, name: 'مقدمة في البرمجة', progress: 75 },
          { id: 2, name: 'هياكل البيانات', progress: 40 },
          { id: 3, name: 'قواعد البيانات', progress: 60 }
        ],
        upcomingAssignments: [
          { id: 1, title: 'واجب 3 في مقدمة في البرمجة', dueDate: '2024-06-15' },
          { id: 2, title: 'اختبار منتصف الفصل في هياكل البيانات', dueDate: '2024-06-20' }
        ],
        notifications: [
          { id: 1, text: 'تم نشر إعلان جديد من عضو هيئة التدريس', date: '2024-06-10' },
          { id: 2, text: 'تم تحديث موعد اختبار', date: '2024-06-08' }
        ]
      }
    }
  };

  // Utility: format date to Arabic date string
  function formatDate(dateStr) {
    const d = new Date(dateStr);
    return d.toLocaleDateString('ar-EG', { year: 'numeric', month: 'long', day: 'numeric' });
  }

  // Render sidebar menus
  function renderSidebar(role) {
    const nav = sidebar.querySelector('nav');
    nav.innerHTML = '';
    const roleMenus = menus[role];
    roleMenus.forEach(menu => {
      const menuItem = document.createElement('div');
      menuItem.className = 'space-y-1';

      // Main menu button
      const mainBtn = document.createElement('button');
      mainBtn.type = 'button';
      mainBtn.className = 'flex items-center justify-between w-full px-3 py-2 text-gray-700 hover:bg-indigo-100 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500';
      mainBtn.setAttribute('aria-expanded', 'false');
      mainBtn.setAttribute('aria-controls', `submenu-${menu.key}`);
      mainBtn.id = `menu-btn-${menu.key}`;
      mainBtn.innerHTML = `
        <span class="flex items-center space-x-2 rtl:space-x-reverse">
          <i class="fas fa-${menu.icon} w-5 text-indigo-600"></i>
          <span class="font-semibold">${menu.title}</span>
        </span>
        <i class="fas fa-chevron-left transition-transform duration-200"></i>
      `;

      menuItem.appendChild(mainBtn);

      // Submenu container
      if (menu.submenus.length > 0) {
        const submenu = document.createElement('div');
        submenu.id = `submenu-${menu.key}`;
        submenu.className = 'max-h-0 overflow-hidden transition-all duration-300';
        menu.submenus.forEach(sub => {
          const subBtn = document.createElement('button');
          subBtn.type = 'button';
          subBtn.className = 'block w-full text-right px-8 py-2 text-gray-600 hover:bg-indigo-50 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500';
          subBtn.textContent = sub.title;
          subBtn.dataset.key = sub.key;
          submenu.appendChild(subBtn);
        });
        menuItem.appendChild(submenu);
      }

      nav.appendChild(menuItem);
    });

    // Add event listeners for toggling submenus and selecting items
    nav.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', e => {
        e.stopPropagation();
        const isMainMenu = btn.id && btn.id.startsWith('menu-btn-');
        if (isMainMenu) {
          // Toggle submenu
          const key = btn.id.replace('menu-btn-', '');
          const submenu = document.getElementById(`submenu-${key}`);
          if (!submenu) {
            // No submenu, load content directly
            currentSidebarMenu = key;
            renderContent(role, key);
            // Remove active from all main buttons
            nav.querySelectorAll('button[id^="menu-btn-"]').forEach(b => b.classList.remove('bg-indigo-100', 'text-indigo-700'));
            btn.classList.add('bg-indigo-100', 'text-indigo-700');
            return;
          }
          const expanded = btn.getAttribute('aria-expanded') === 'true';
          btn.setAttribute('aria-expanded', expanded ? 'false' : 'true');
          if (expanded) {
            submenu.style.maxHeight = '0';
            btn.querySelector('i.fas.fa-chevron-left').style.transform = 'rotate(0deg)';
          } else {
            submenu.style.maxHeight = submenu.scrollHeight + 'px';
            btn.querySelector('i.fas.fa-chevron-left').style.transform = 'rotate(90deg)';
          }
        } else {
          // Submenu clicked
          currentSidebarMenu = btn.dataset.key;
          renderContent(role, btn.dataset.key);
          // Remove active from all submenu buttons
          nav.querySelectorAll('div[id^="submenu-"] button').forEach(b => b.classList.remove('bg-indigo-100', 'text-indigo-700'));
          btn.classList.add('bg-indigo-100', 'text-indigo-700');
          // Also highlight parent main menu
          nav.querySelectorAll('button[id^="menu-btn-"]').forEach(b => b.classList.remove('bg-indigo-100', 'text-indigo-700'));
          const parentSubmenu = btn.closest('div[id^="submenu-"]');
          if (parentSubmenu) {
            const parentKey = parentSubmenu.id.replace('submenu-', '');
            const parentBtn = document.getElementById(`menu-btn-${parentKey}`);
            if (parentBtn) parentBtn.classList.add('bg-indigo-100', 'text-indigo-700');
          }
        }
      });
    });
  }

  // Render main content based on role and selected menu key
  function renderContent(role, key) {
    mainContent.innerHTML = '';
    if (!key || key === 'dashboard') {
      renderDashboard(role);
      return;
    }
    // Render other pages based on key and role
    if (role === 'faculty') {
      renderFacultyContent(key);
    } else if (role === 'admin') {
      renderAdminContent(key);
    } else if (role === 'student') {
      renderStudentContent(key);
    }
  }

  // Dashboard renderers
  function renderDashboard(role) {
    mainContent.innerHTML = '';
    if (role === 'faculty') {
      const data = sampleData.faculty.dashboard;
      const container = document.createElement('div');
      container.className = 'space-y-6';

      // Title
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'لوحة التحكم الرئيسية';
      container.appendChild(title);

      // Courses list
      const coursesSection = document.createElement('section');
      coursesSection.className = 'bg-white rounded-lg shadow p-5';
      const coursesTitle = document.createElement('h3');
      coursesTitle.className = 'text-xl font-semibold mb-3 text-indigo-700';
      coursesTitle.textContent = 'قائمة المقررات الدراسية';
      coursesSection.appendChild(coursesTitle);

      const coursesList = document.createElement('ul');
      coursesList.className = 'divide-y divide-gray-200';
      data.courses.forEach(course => {
        const li = document.createElement('li');
        li.className = 'py-2 flex justify-between items-center';
        li.innerHTML = `
          <span class="font-medium text-gray-700">${course.name}</span>
          <span class="text-sm text-gray-500">عدد الطلاب: ${course.students}</span>
        `;
        coursesList.appendChild(li);
      });
      coursesSection.appendChild(coursesList);
      container.appendChild(coursesSection);

      // Recent activities
      const activitiesSection = document.createElement('section');
      activitiesSection.className = 'bg-white rounded-lg shadow p-5';
      const activitiesTitle = document.createElement('h3');
      activitiesTitle.className = 'text-xl font-semibold mb-3 text-indigo-700';
      activitiesTitle.textContent = 'الأنشطة الأخيرة';
      activitiesSection.appendChild(activitiesTitle);

      const activitiesList = document.createElement('ul');
      activitiesList.className = 'divide-y divide-gray-200';
      data.recentActivities.forEach(act => {
        const li = document.createElement('li');
        li.className = 'py-2 flex justify-between items-center';
        li.innerHTML = `
          <span class="text-gray-700">${act.text}</span>
          <span class="text-xs text-gray-400">${formatDate(act.date)}</span>
        `;
        activitiesList.appendChild(li);
      });
      activitiesSection.appendChild(activitiesList);
      container.appendChild(activitiesSection);

      // Important notifications
      const notificationsSection = document.createElement('section');
      notificationsSection.className = 'bg-white rounded-lg shadow p-5';
      const notificationsTitle = document.createElement('h3');
      notificationsTitle.className = 'text-xl font-semibold mb-3 text-indigo-700';
      notificationsTitle.textContent = 'إشعارات مهمة';
      notificationsSection.appendChild(notificationsTitle);

      const notificationsList = document.createElement('ul');
      notificationsList.className = 'divide-y divide-gray-200';
      data.notifications.forEach(note => {
        const li = document.createElement('li');
        li.className = 'py-2 flex justify-between items-center';
        li.innerHTML = `
          <span class="text-gray-700">${note.text}</span>
          <span class="text-xs text-gray-400">${formatDate(note.date)}</span>
        `;
        notificationsList.appendChild(li);
      });
      notificationsSection.appendChild(notificationsList);
      container.appendChild(notificationsSection);

      mainContent.appendChild(container);
    } else if (role === 'admin') {
      const data = sampleData.admin.dashboard;
      const container = document.createElement('div');
      container.className = 'space-y-6';

      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'لوحة التحكم الرئيسية';
      container.appendChild(title);

      // Overview cards
      const overviewGrid = document.createElement('div');
      overviewGrid.className = 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6';

      const usersCard = document.createElement('div');
      usersCard.className = 'bg-white rounded-lg shadow p-5 flex items-center space-x-4 rtl:space-x-reverse';
      usersCard.innerHTML = `
        <i class="fas fa-users-cog fa-3x text-indigo-600"></i>
        <div>
          <p class="text-gray-500">عدد المستخدمين</p>
          <p class="text-2xl font-bold text-gray-800">${data.usersCount}</p>
        </div>
      `;
      overviewGrid.appendChild(usersCard);

      const coursesCard = document.createElement('div');
      coursesCard.className = 'bg-white rounded-lg shadow p-5 flex items-center space-x-4 rtl:space-x-reverse';
      coursesCard.innerHTML = `
        <i class="fas fa-book fa-3x text-indigo-600"></i>
        <div>
          <p class="text-gray-500">عدد المقررات</p>
          <p class="text-2xl font-bold text-gray-800">${data.coursesCount}</p>
        </div>
      `;
      overviewGrid.appendChild(coursesCard);

      container.appendChild(overviewGrid);

      // Notifications
      const notificationsSection = document.createElement('section');
      notificationsSection.className = 'bg-white rounded-lg shadow p-5 mt-6';
      const notificationsTitle = document.createElement('h3');
      notificationsTitle.className = 'text-xl font-semibold mb-3 text-indigo-700';
      notificationsTitle.textContent = 'الإشعارات والتنبيهات';
      notificationsSection.appendChild(notificationsTitle);

      const notificationsList = document.createElement('ul');
      notificationsList.className = 'divide-y divide-gray-200';
      data.notifications.forEach(note => {
        const li = document.createElement('li');
        li.className = 'py-2 flex justify-between items-center';
        li.innerHTML = `
          <span class="text-gray-700">${note.text}</span>
          <span class="text-xs text-gray-400">${formatDate(note.date)}</span>
        `;
        notificationsList.appendChild(li);
      });
      notificationsSection.appendChild(notificationsList);
      container.appendChild(notificationsSection);

      mainContent.appendChild(container);
    } else if (role === 'student') {
      const data = sampleData.student.dashboard;
      const container = document.createElement('div');
      container.className = 'space-y-6';

      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'لوحة التحكم الرئيسية';
      container.appendChild(title);

      // Enrolled courses with progress bars
      const coursesSection = document.createElement('section');
      coursesSection.className = 'bg-white rounded-lg shadow p-5';
      const coursesTitle = document.createElement('h3');
      coursesTitle.className = 'text-xl font-semibold mb-3 text-indigo-700';
      coursesTitle.textContent = 'المقررات المسجل بها';
      coursesSection.appendChild(coursesTitle);

      data.enrolledCourses.forEach(course => {
        const courseDiv = document.createElement('div');
        courseDiv.className = 'mb-4';
        courseDiv.innerHTML = `
          <div class="flex justify-between mb-1">
            <span class="font-medium text-gray-700">${course.name}</span>
            <span class="text-sm text-gray-600">${course.progress}%</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-3">
            <div class="bg-indigo-600 h-3 rounded-full" style="width: ${course.progress}%;"></div>
          </div>
        `;
        coursesSection.appendChild(courseDiv);
      });
      container.appendChild(coursesSection);

      // Upcoming assignments
      const assignmentsSection = document.createElement('section');
      assignmentsSection.className = 'bg-white rounded-lg shadow p-5';
      const assignmentsTitle = document.createElement('h3');
      assignmentsTitle.className = 'text-xl font-semibold mb-3 text-indigo-700';
      assignmentsTitle.textContent = 'الواجبات القادمة';
      assignmentsSection.appendChild(assignmentsTitle);

      const assignmentsList = document.createElement('ul');
      assignmentsList.className = 'divide-y divide-gray-200';
      data.upcomingAssignments.forEach(ass => {
        const li = document.createElement('li');
        li.className = 'py-2 flex justify-between items-center';
        li.innerHTML = `
          <span class="text-gray-700">${ass.title}</span>
          <span class="text-xs text-gray-400">${formatDate(ass.dueDate)}</span>
        `;
        assignmentsList.appendChild(li);
      });
      assignmentsSection.appendChild(assignmentsList);
      container.appendChild(assignmentsSection);

      // Notifications
      const notificationsSection = document.createElement('section');
      notificationsSection.className = 'bg-white rounded-lg shadow p-5';
      const notificationsTitle = document.createElement('h3');
      notificationsTitle.className = 'text-xl font-semibold mb-3 text-indigo-700';
      notificationsTitle.textContent = 'التنبيهات الحديثة';
      notificationsSection.appendChild(notificationsTitle);

      const notificationsList = document.createElement('ul');
      notificationsList.className = 'divide-y divide-gray-200';
      data.notifications.forEach(note => {
        const li = document.createElement('li');
        li.className = 'py-2 flex justify-between items-center';
        li.innerHTML = `
          <span class="text-gray-700">${note.text}</span>
          <span class="text-xs text-gray-400">${formatDate(note.date)}</span>
        `;
        notificationsList.appendChild(li);
      });
      notificationsSection.appendChild(notificationsList);
      container.appendChild(notificationsSection);

      mainContent.appendChild(container);
    }
  }

  // Faculty content pages
  function renderFacultyContent(key) {
    mainContent.innerHTML = '';
    const container = document.createElement('div');
    container.className = 'space-y-6';

    if (key === 'edit-content') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'إنشاء وتحرير محتوى المقرر';
      container.appendChild(title);

      // Form for adding/editing lectures, videos, presentations
      const form = document.createElement('form');
      form.className = 'bg-white rounded-lg shadow p-6 space-y-4';

      form.innerHTML = `
        <div>
          <label for="course-select" class="block mb-2 font-semibold text-gray-700">اختر المقرر</label>
          <select id="course-select" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            <option value="1">مقدمة في البرمجة</option>
            <option value="2">هياكل البيانات</option>
            <option value="3">قواعد البيانات</option>
          </select>
        </div>
        <div>
          <label for="content-type" class="block mb-2 font-semibold text-gray-700">نوع المحتوى</label>
          <select id="content-type" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            <option value="lecture">محاضرة</option>
            <option value="video">فيديو</option>
            <option value="presentation">عرض تقديمي</option>
          </select>
        </div>
        <div>
          <label for="content-title" class="block mb-2 font-semibold text-gray-700">عنوان المحتوى</label>
          <input type="text" id="content-title" placeholder="أدخل عنوان المحتوى" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        </div>
        <div>
          <label for="content-file" class="block mb-2 font-semibold text-gray-700">رفع الملف</label>
          <input type="file" id="content-file" class="w-full" />
        </div>
        <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">حفظ المحتوى</button>
      `;

      container.appendChild(form);
    } else if (key === 'schedule') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'جدولة المحاضرات والاختبارات';
      container.appendChild(title);

      // Schedule table
      const tableWrapper = document.createElement('div');
      tableWrapper.className = 'overflow-x-auto bg-white rounded-lg shadow p-4';

      tableWrapper.innerHTML = `
        <table class="min-w-full text-right text-gray-700">
          <thead class="bg-indigo-100">
            <tr>
              <th class="px-4 py-2">المقرر</th>
              <th class="px-4 py-2">نوع الحدث</th>
              <th class="px-4 py-2">التاريخ والوقت</th>
              <th class="px-4 py-2">الإجراءات</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">مقدمة في البرمجة</td>
              <td class="px-4 py-2">محاضرة</td>
              <td class="px-4 py-2">2024-06-15 10:00 صباحاً</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">تعديل</button>
                <button class="text-red-600 hover:underline mr-2 rtl:mr-0 rtl:ml-2">حذف</button>
              </td>
            </tr>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">هياكل البيانات</td>
              <td class="px-4 py-2">اختبار</td>
              <td class="px-4 py-2">2024-06-20 02:00 مساءً</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">تعديل</button>
                <button class="text-red-600 hover:underline mr-2 rtl:mr-0 rtl:ml-2">حذف</button>
              </td>
            </tr>
          </tbody>
        </table>
      `;

      container.appendChild(tableWrapper);
    } else if (key === 'assignments') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'إدارة الواجبات والدرجات';
      container.appendChild(title);

      // Assignments list with grades
      const assignmentsSection = document.createElement('div');
      assignmentsSection.className = 'bg-white rounded-lg shadow p-5';

      assignmentsSection.innerHTML = `
        <table class="min-w-full text-right text-gray-700">
          <thead class="bg-indigo-100">
            <tr>
              <th class="px-4 py-2">المقرر</th>
              <th class="px-4 py-2">عنوان الواجب</th>
              <th class="px-4 py-2">عدد الطلاب المسجلين</th>
              <th class="px-4 py-2">تاريخ التسليم</th>
              <th class="px-4 py-2">الإجراءات</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">مقدمة في البرمجة</td>
              <td class="px-4 py-2">واجب 1</td>
              <td class="px-4 py-2">45</td>
              <td class="px-4 py-2">2024-06-18</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">عرض الدرجات</button>
              </td>
            </tr>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">هياكل البيانات</td>
              <td class="px-4 py-2">واجب 2</td>
              <td class="px-4 py-2">38</td>
              <td class="px-4 py-2">2024-06-22</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">عرض الدرجات</button>
              </td>
            </tr>
          </tbody>
        </table>
      `;

      container.appendChild(assignmentsSection);
    } else if (key === 'communication') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'التواصل مع الطلاب';
      container.appendChild(title);

      // Messaging interface (simple)
      const messageSection = document.createElement('div');
      messageSection.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      messageSection.innerHTML = `
        <div>
          <label for="message-to" class="block mb-2 font-semibold text-gray-700">إلى</label>
          <select id="message-to" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            <option value="all">جميع الطلاب</option>
            <option value="course1">طلاب مقرر مقدمة في البرمجة</option>
            <option value="course2">طلاب مقرر هياكل البيانات</option>
          </select>
        </div>
        <div>
          <label for="message-text" class="block mb-2 font-semibold text-gray-700">الرسالة</label>
          <textarea id="message-text" rows="4" placeholder="اكتب رسالتك هنا..." class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
        </div>
        <button class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إرسال الرسالة</button>
      `;

      container.appendChild(messageSection);
    } else if (key === 'forums') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'إنشاء منتديات نقاش';
      container.appendChild(title);

      // Simple forum creation form
      const forumForm = document.createElement('form');
      forumForm.className = 'bg-white rounded-lg shadow p-6 space-y-4';

      forumForm.innerHTML = `
        <div>
          <label for="forum-title" class="block mb-2 font-semibold text-gray-700">عنوان المنتدى</label>
          <input type="text" id="forum-title" placeholder="أدخل عنوان المنتدى" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        </div>
        <div>
          <label for="forum-description" class="block mb-2 font-semibold text-gray-700">الوصف</label>
          <textarea id="forum-description" rows="4" placeholder="أدخل وصف المنتدى" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
        </div>
        <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إنشاء المنتدى</button>
      `;

      container.appendChild(forumForm);
    } else if (key === 'messages') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'إرسال رسائل مباشرة أو جماعية';
      container.appendChild(title);

      // Messaging interface (simple)
      const messageSection = document.createElement('div');
      messageSection.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      messageSection.innerHTML = `
        <div>
          <label for="message-to" class="block mb-2 font-semibold text-gray-700">إلى</label>
          <select id="message-to" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            <option value="all">جميع الطلاب</option>
            <option value="course1">طلاب مقرر مقدمة في البرمجة</option>
            <option value="course2">طلاب مقرر هياكل البيانات</option>
          </select>
        </div>
        <div>
          <label for="message-text" class="block mb-2 font-semibold text-gray-700">الرسالة</label>
          <textarea id="message-text" rows="4" placeholder="اكتب رسالتك هنا..." class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
        </div>
        <button class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إرسال الرسالة</button>
      `;

      container.appendChild(messageSection);
    } else if (key === 'announcements') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'نشر الإعلانات';
      container.appendChild(title);

      // Announcement form
      const announcementForm = document.createElement('form');
      announcementForm.className = 'bg-white rounded-lg shadow p-6 space-y-4';

      announcementForm.innerHTML = `
        <div>
          <label for="announcement-title" class="block mb-2 font-semibold text-gray-700">عنوان الإعلان</label>
          <input type="text" id="announcement-title" placeholder="أدخل عنوان الإعلان" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        </div>
        <div>
          <label for="announcement-text" class="block mb-2 font-semibold text-gray-700">نص الإعلان</label>
          <textarea id="announcement-text" rows="4" placeholder="أدخل نص الإعلان" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
        </div>
        <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">نشر الإعلان</button>
      `;

      container.appendChild(announcementForm);
    } else if (key === 'performance') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'تقارير أداء الطلاب في الاختبارات والواجبات';
      container.appendChild(title);

      // Sample performance report table
      const tableWrapper = document.createElement('div');
      tableWrapper.className = 'overflow-x-auto bg-white rounded-lg shadow p-4';

      tableWrapper.innerHTML = `
        <table class="min-w-full text-right text-gray-700">
          <thead class="bg-indigo-100">
            <tr>
              <th class="px-4 py-2">اسم الطالب</th>
              <th class="px-4 py-2">المقرر</th>
              <th class="px-4 py-2">الاختبار</th>
              <th class="px-4 py-2">الدرجة</th>
              <th class="px-4 py-2">ملاحظات</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">محمد علي</td>
              <td class="px-4 py-2">مقدمة في البرمجة</td>
              <td class="px-4 py-2">اختبار منتصف الفصل</td>
              <td class="px-4 py-2">85%</td>
              <td class="px-4 py-2">جيد جداً</td>
            </tr>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">سارة أحمد</td>
              <td class="px-4 py-2">هياكل البيانات</td>
              <td class="px-4 py-2">واجب 2</td>
              <td class="px-4 py-2">90%</td>
              <td class="px-4 py-2">ممتاز</td>
            </tr>
          </tbody>
        </table>
      `;

      container.appendChild(tableWrapper);
    } else if (key === 'analytics') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'تحليلات التفاعل والتقدم';
      container.appendChild(title);

      // Placeholder analytics charts (images)
      const chartsDiv = document.createElement('div');
      chartsDiv.className = 'grid grid-cols-1 md:grid-cols-2 gap-6';

      const chart1 = document.createElement('div');
      chart1.className = 'bg-white rounded-lg shadow p-4 flex flex-col items-center';
      const img1 = document.createElement('img');
      img1.src = 'https://placehold.co/600x300/png?text=مخطط+تفاعل+الطلاب';
      img1.alt = 'مخطط بياني ملون يوضح تفاعل الطلاب مع المحتوى التعليمي على مدار الأسابيع، مع محاور زمنية وعدد التفاعلات';
      img1.className = 'w-full h-auto rounded-md';
      chart1.appendChild(img1);
      const caption1 = document.createElement('p');
      caption1.className = 'mt-2 text-gray-600';
      caption1.textContent = 'مخطط تفاعل الطلاب';
      chart1.appendChild(caption1);

      const chart2 = document.createElement('div');
      chart2.className = 'bg-white rounded-lg shadow p-4 flex flex-col items-center';
      const img2 = document.createElement('img');
      img2.src = 'https://placehold.co/600x300/png?text=مخطط+تقدم+الطلاب';
      img2.alt = 'مخطط بياني ملون يوضح تقدم الطلاب في المقررات الدراسية المختلفة مع نسب مئوية وألوان متدرجة';
      img2.className = 'w-full h-auto rounded-md';
      chart2.appendChild(img2);
      const caption2 = document.createElement('p');
      caption2.className = 'mt-2 text-gray-600';
      caption2.textContent = 'مخطط تقدم الطلاب';
      chart2.appendChild(caption2);

      chartsDiv.appendChild(chart1);
      chartsDiv.appendChild(chart2);

      container.appendChild(chartsDiv);
    } else if (key === 'faq') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'الأسئلة الشائعة';
      container.appendChild(title);

      // FAQ list
      const faqList = document.createElement('div');
      faqList.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      const faqs = [
        { q: 'كيف يمكنني إنشاء محتوى جديد؟', a: 'يمكنك الذهاب إلى قسم إدارة المقررات الدراسية ثم اختيار إنشاء وتحرير المحتوى.' },
        { q: 'كيف أجد جدول المحاضرات؟', a: 'يمكنك الاطلاع على جدول المحاضرات من خلال قسم جدولة المحاضرات والاختبارات.' },
        { q: 'كيف أتواصل مع الطلاب؟', a: 'يمكنك استخدام قسم التواصل والتفاعل لإرسال الرسائل أو إنشاء منتديات نقاش.' }
      ];

      faqs.forEach(faq => {
        const item = document.createElement('div');
        item.className = 'border border-gray-200 rounded-md p-4';
        item.innerHTML = `
          <h4 class="font-semibold text-gray-700 mb-2">${faq.q}</h4>
          <p class="text-gray-600">${faq.a}</p>
        `;
        faqList.appendChild(item);
      });

      container.appendChild(faqList);
    } else if (key === 'contact-support') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'نموذج تواصل مع فريق الدعم';
      container.appendChild(title);

      // Contact form
      const contactForm = document.createElement('form');
      contactForm.className = 'bg-white rounded-lg shadow p-6 space-y-4';

      contactForm.innerHTML = `
        <div>
          <label for="support-subject" class="block mb-2 font-semibold text-gray-700">الموضوع</label>
          <input type="text" id="support-subject" placeholder="أدخل موضوع الرسالة" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
        </div>
        <div>
          <label for="support-message" class="block mb-2 font-semibold text-gray-700">الرسالة</label>
          <textarea id="support-message" rows="5" placeholder="اكتب رسالتك هنا..." class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
        </div>
        <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إرسال</button>
      `;

      container.appendChild(contactForm);
    } else {
      // Default fallback content
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'المحتوى غير متوفر حالياً';
      container.appendChild(title);
    }

    mainContent.appendChild(container);
  }

  // Admin content pages
  function renderAdminContent(key) {
    mainContent.innerHTML = '';
    const container = document.createElement('div');
    container.className = 'space-y-6';

    if (key === 'user-management') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'إدارة المستخدمين';
      container.appendChild(title);

      // Tabs for manage accounts and roles
      const tabs = document.createElement('div');
      tabs.className = 'flex space-x-4 rtl:space-x-reverse border-b border-gray-300 mb-4';

      const tabAccounts = document.createElement('button');
      tabAccounts.textContent = 'إضافة/تعديل/حذف حسابات';
      tabAccounts.className = 'py-2 px-4 border-b-2 border-indigo-600 text-indigo-600 font-semibold focus:outline-none';
      tabAccounts.dataset.tab = 'manage-accounts';

      const tabRoles = document.createElement('button');
      tabRoles.textContent = 'إدارة الصلاحيات والأدوار';
      tabRoles.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabRoles.dataset.tab = 'manage-roles';

      tabs.appendChild(tabAccounts);
      tabs.appendChild(tabRoles);
      container.appendChild(tabs);

      const tabContent = document.createElement('div');
      tabContent.id = 'admin-user-management-content';
      container.appendChild(tabContent);

      // Render default tab content
      renderAdminUserManagementTab('manage-accounts', tabContent);

      // Tab switching
      tabs.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          tabs.querySelectorAll('button').forEach(b => {
            b.classList.remove('border-indigo-600', 'text-indigo-600', 'font-semibold');
            b.classList.add('text-gray-600');
          });
          btn.classList.add('border-indigo-600', 'text-indigo-600', 'font-semibold');
          btn.classList.remove('text-gray-600');
          renderAdminUserManagementTab(btn.dataset.tab, tabContent);
        });
      });
    } else if (key === 'course-management') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'إدارة المقررات الدراسية';
      container.appendChild(title);

      // Tabs for edit courses, assign faculty, content quality
      const tabs = document.createElement('div');
      tabs.className = 'flex space-x-4 rtl:space-x-reverse border-b border-gray-300 mb-4';

      const tabEdit = document.createElement('button');
      tabEdit.textContent = 'إضافة وتعديل المقررات';
      tabEdit.className = 'py-2 px-4 border-b-2 border-indigo-600 text-indigo-600 font-semibold focus:outline-none';
      tabEdit.dataset.tab = 'edit-courses';

      const tabAssign = document.createElement('button');
      tabAssign.textContent = 'تعيين المدرّسين';
      tabAssign.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabAssign.dataset.tab = 'assign-faculty';

      const tabQuality = document.createElement('button');
      tabQuality.textContent = 'مراجعة جودة المحتوى';
      tabQuality.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabQuality.dataset.tab = 'content-quality';

      tabs.appendChild(tabEdit);
      tabs.appendChild(tabAssign);
      tabs.appendChild(tabQuality);
      container.appendChild(tabs);

      const tabContent = document.createElement('div');
      tabContent.id = 'admin-course-management-content';
      container.appendChild(tabContent);

      renderAdminCourseManagementTab('edit-courses', tabContent);

      tabs.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          tabs.querySelectorAll('button').forEach(b => {
            b.classList.remove('border-indigo-600', 'text-indigo-600', 'font-semibold');
            b.classList.add('text-gray-600');
          });
          btn.classList.add('border-indigo-600', 'text-indigo-600', 'font-semibold');
          btn.classList.remove('text-gray-600');
          renderAdminCourseManagementTab(btn.dataset.tab, tabContent);
        });
      });
    } else if (key === 'reports') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'إدارة التقارير والتحليلات';
      container.appendChild(title);

      // Tabs for custom reports, performance analysis, export reports
      const tabs = document.createElement('div');
      tabs.className = 'flex space-x-4 rtl:space-x-reverse border-b border-gray-300 mb-4';

      const tabCustom = document.createElement('button');
      tabCustom.textContent = 'إنشاء تقارير مخصصة';
      tabCustom.className = 'py-2 px-4 border-b-2 border-indigo-600 text-indigo-600 font-semibold focus:outline-none';
      tabCustom.dataset.tab = 'custom-reports';

      const tabPerformance = document.createElement('button');
      tabPerformance.textContent = 'تحليل بيانات الأداء';
      tabPerformance.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabPerformance.dataset.tab = 'performance-analysis';

      const tabExport = document.createElement('button');
      tabExport.textContent = 'تصدير التقارير';
      tabExport.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabExport.dataset.tab = 'export-reports';

      tabs.appendChild(tabCustom);
      tabs.appendChild(tabPerformance);
      tabs.appendChild(tabExport);
      container.appendChild(tabs);

      const tabContent = document.createElement('div');
      tabContent.id = 'admin-reports-content';
      container.appendChild(tabContent);

      renderAdminReportsTab('custom-reports', tabContent);

      tabs.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          tabs.querySelectorAll('button').forEach(b => {
            b.classList.remove('border-indigo-600', 'text-indigo-600', 'font-semibold');
            b.classList.add('text-gray-600');
          });
          btn.classList.add('border-indigo-600', 'text-indigo-600', 'font-semibold');
          btn.classList.remove('text-gray-600');
          renderAdminReportsTab(btn.dataset.tab, tabContent);
        });
      });
    } else if (key === 'system-management') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'إدارة النظام';
      container.appendChild(title);

      // Tabs for general settings, maintenance, database management
      const tabs = document.createElement('div');
      tabs.className = 'flex space-x-4 rtl:space-x-reverse border-b border-gray-300 mb-4';

      const tabGeneral = document.createElement('button');
      tabGeneral.textContent = 'إعدادات النظام العامة';
      tabGeneral.className = 'py-2 px-4 border-b-2 border-indigo-600 text-indigo-600 font-semibold focus:outline-none';
      tabGeneral.dataset.tab = 'general-settings';

      const tabMaintenance = document.createElement('button');
      tabMaintenance.textContent = 'صيانة وتحديثات';
      tabMaintenance.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabMaintenance.dataset.tab = 'maintenance';

      const tabDatabase = document.createElement('button');
      tabDatabase.textContent = 'إدارة قواعد البيانات';
      tabDatabase.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabDatabase.dataset.tab = 'database-management';

      tabs.appendChild(tabGeneral);
      tabs.appendChild(tabMaintenance);
      tabs.appendChild(tabDatabase);
      container.appendChild(tabs);

      const tabContent = document.createElement('div');
      tabContent.id = 'admin-system-content';
      container.appendChild(tabContent);

      renderAdminSystemTab('general-settings', tabContent);

      tabs.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          tabs.querySelectorAll('button').forEach(b => {
            b.classList.remove('border-indigo-600', 'text-indigo-600', 'font-semibold');
            b.classList.add('text-gray-600');
          });
          btn.classList.add('border-indigo-600', 'text-indigo-600', 'font-semibold');
          btn.classList.remove('text-gray-600');
          renderAdminSystemTab(btn.dataset.tab, tabContent);
        });
      });
    } else if (key === 'support') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'الدعم الفني';
      container.appendChild(title);

      // Tabs for support requests and technical solutions
      const tabs = document.createElement('div');
      tabs.className = 'flex space-x-4 rtl:space-x-reverse border-b border-gray-300 mb-4';

      const tabRequests = document.createElement('button');
      tabRequests.textContent = 'متابعة طلبات الدعم';
      tabRequests.className = 'py-2 px-4 border-b-2 border-indigo-600 text-indigo-600 font-semibold focus:outline-none';
      tabRequests.dataset.tab = 'support-requests';

      const tabSolutions = document.createElement('button');
      tabSolutions.textContent = 'إدارة الحلول التقنية';
      tabSolutions.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabSolutions.dataset.tab = 'technical-solutions';

      tabs.appendChild(tabRequests);
      tabs.appendChild(tabSolutions);
      container.appendChild(tabs);

      const tabContent = document.createElement('div');
      tabContent.id = 'admin-support-content';
      container.appendChild(tabContent);

      renderAdminSupportTab('support-requests', tabContent);

      tabs.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          tabs.querySelectorAll('button').forEach(b => {
            b.classList.remove('border-indigo-600', 'text-indigo-600', 'font-semibold');
            b.classList.add('text-gray-600');
          });
          btn.classList.add('border-indigo-600', 'text-indigo-600', 'font-semibold');
          btn.classList.remove('text-gray-600');
          renderAdminSupportTab(btn.dataset.tab, tabContent);
        });
      });
    } else {
      // Default fallback content
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'المحتوى غير متوفر حالياً';
      container.appendChild(title);
    }

    mainContent.appendChild(container);
  }

  // Admin user management tabs content
  function renderAdminUserManagementTab(tabKey, container) {
    container.innerHTML = '';
    if (tabKey === 'manage-accounts') {
      // User accounts table
      const tableWrapper = document.createElement('div');
      tableWrapper.className = 'overflow-x-auto';

      tableWrapper.innerHTML = `
        <table class="min-w-full text-right text-gray-700 bg-white rounded-lg shadow">
          <thead class="bg-indigo-100">
            <tr>
              <th class="px-4 py-2">الاسم</th>
              <th class="px-4 py-2">البريد الإلكتروني</th>
              <th class="px-4 py-2">الدور</th>
              <th class="px-4 py-2">الحالة</th>
              <th class="px-4 py-2">الإجراءات</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">أحمد محمد</td>
              <td class="px-4 py-2">ahmed@example.com</td>
              <td class="px-4 py-2">عضو هيئة تدريس</td>
              <td class="px-4 py-2">نشط</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">تعديل</button>
                <button class="text-red-600 hover:underline mr-2 rtl:mr-0 rtl:ml-2">حذف</button>
              </td>
            </tr>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">سارة أحمد</td>
              <td class="px-4 py-2">sara@example.com</td>
              <td class="px-4 py-2">طالبة</td>
              <td class="px-4 py-2">نشط</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">تعديل</button>
                <button class="text-red-600 hover:underline mr-2 rtl:mr-0 rtl:ml-2">حذف</button>
              </td>
            </tr>
          </tbody>
        </table>
        <button class="mt-4 bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إضافة مستخدم جديد</button>
      `;

      container.appendChild(tableWrapper);
    } else if (tabKey === 'manage-roles') {
      // Roles and permissions management
      const rolesDiv = document.createElement('div');
      rolesDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      rolesDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">إدارة الصلاحيات والأدوار</h3>
        <p class="text-gray-600">يمكنك تعديل صلاحيات الأدوار المختلفة من هنا.</p>
        <button class="mt-4 bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">تعديل الصلاحيات</button>
      `;

      container.appendChild(rolesDiv);
    }
  }

  // Admin course management tabs content
  function renderAdminCourseManagementTab(tabKey, container) {
    container.innerHTML = '';
    if (tabKey === 'edit-courses') {
      const coursesDiv = document.createElement('div');
      coursesDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      coursesDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">إضافة وتعديل المقررات</h3>
        <table class="min-w-full text-right text-gray-700">
          <thead class="bg-indigo-100">
            <tr>
              <th class="px-4 py-2">اسم المقرر</th>
              <th class="px-4 py-2">الوصف</th>
              <th class="px-4 py-2">الإجراءات</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">مقدمة في البرمجة</td>
              <td class="px-4 py-2">مقرر تعريفي بأساسيات البرمجة</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">تعديل</button>
                <button class="text-red-600 hover:underline mr-2 rtl:mr-0 rtl:ml-2">حذف</button>
              </td>
            </tr>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">هياكل البيانات</td>
              <td class="px-4 py-2">مقرر يشرح هياكل البيانات المختلفة</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">تعديل</button>
                <button class="text-red-600 hover:underline mr-2 rtl:mr-0 rtl:ml-2">حذف</button>
              </td>
            </tr>
          </tbody>
        </table>
        <button class="mt-4 bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إضافة مقرر جديد</button>
      `;

      container.appendChild(coursesDiv);
    } else if (tabKey === 'assign-faculty') {
      const assignDiv = document.createElement('div');
      assignDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      assignDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">تعيين المدرّسين</h3>
        <form class="space-y-4">
          <div>
            <label for="select-course" class="block mb-2 font-semibold text-gray-700">اختر المقرر</label>
            <select id="select-course" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
              <option value="1">مقدمة في البرمجة</option>
              <option value="2">هياكل البيانات</option>
            </select>
          </div>
          <div>
            <label for="select-faculty" class="block mb-2 font-semibold text-gray-700">اختر عضو هيئة التدريس</label>
            <select id="select-faculty" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
              <option value="1">أحمد محمد</option>
              <option value="2">ليلى خالد</option>
            </select>
          </div>
          <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">تعيين</button>
        </form>
      `;

      container.appendChild(assignDiv);
    } else if (tabKey === 'content-quality') {
      const qualityDiv = document.createElement('div');
      qualityDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      qualityDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">مراجعة جودة المحتوى</h3>
        <p class="text-gray-600">يمكنك مراجعة جودة المحتوى التعليمي المقدم في المقررات المختلفة.</p>
        <button class="mt-4 bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">عرض التقارير</button>
      `;

      container.appendChild(qualityDiv);
    }
  }

  // Admin reports tabs content
  function renderAdminReportsTab(tabKey, container) {
    container.innerHTML = '';
    if (tabKey === 'custom-reports') {
      const customDiv = document.createElement('div');
      customDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      customDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">إنشاء تقارير مخصصة</h3>
        <form class="space-y-4">
          <div>
            <label for="report-type" class="block mb-2 font-semibold text-gray-700">نوع التقرير</label>
            <select id="report-type" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
              <option value="performance">أداء الطلاب</option>
              <option value="attendance">الحضور</option>
              <option value="engagement">التفاعل</option>
            </select>
          </div>
          <div>
            <label for="report-date" class="block mb-2 font-semibold text-gray-700">تاريخ التقرير</label>
            <input type="date" id="report-date" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
          </div>
          <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إنشاء التقرير</button>
        </form>
      `;

      container.appendChild(customDiv);
    } else if (tabKey === 'performance-analysis') {
      const analysisDiv = document.createElement('div');
      analysisDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      analysisDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">تحليل بيانات الأداء</h3>
        <img src="https://placehold.co/800x400/png?text=مخطط+تحليل+الأداء" alt="مخطط بياني ملون يوضح تحليل بيانات أداء الطلاب في المقررات المختلفة مع محاور زمنية ونسب مئوية" class="w-full rounded-md" />
      `;

      container.appendChild(analysisDiv);
    } else if (tabKey === 'export-reports') {
      const exportDiv = document.createElement('div');
      exportDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      exportDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">تصدير التقارير</h3>
        <p class="text-gray-600">يمكنك تصدير التقارير بصيغ مختلفة مثل PDF أو Excel.</p>
        <button class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">تصدير التقرير</button>
      `;

      container.appendChild(exportDiv);
    }
  }

  // Admin system management tabs content
  function renderAdminSystemTab(tabKey, container) {
    container.innerHTML = '';
    if (tabKey === 'general-settings') {
      const generalDiv = document.createElement('div');
      generalDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      generalDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">إعدادات النظام العامة</h3>
        <form class="space-y-4">
          <div>
            <label for="site-name" class="block mb-2 font-semibold text-gray-700">اسم الموقع</label>
            <input type="text" id="site-name" value="نظام إدارة التعلم الإلكتروني" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
          </div>
          <div>
            <label for="timezone" class="block mb-2 font-semibold text-gray-700">المنطقة الزمنية</label>
            <select id="timezone" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
              <option value="Asia/Riyadh" selected>Asia/Riyadh</option>
              <option value="Asia/Dubai">Asia/Dubai</option>
              <option value="Asia/Kuwait">Asia/Kuwait</option>
            </select>
          </div>
          <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">حفظ الإعدادات</button>
        </form>
      `;

      container.appendChild(generalDiv);
    } else if (tabKey === 'maintenance') {
      const maintenanceDiv = document.createElement('div');
      maintenanceDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      maintenanceDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">صيانة وتحديثات</h3>
        <p class="text-gray-600">يمكنك جدولة الصيانة أو تحديث النظام من هنا.</p>
        <button class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">بدء الصيانة</button>
      `;

      container.appendChild(maintenanceDiv);
    } else if (tabKey === 'database-management') {
      const dbDiv = document.createElement('div');
      dbDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      dbDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">إدارة قواعد البيانات</h3>
        <p class="text-gray-600">يمكنك إجراء نسخ احتياطي واستعادة قواعد البيانات من هنا.</p>
        <button class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">نسخ احتياطي</button>
        <button class="bg-red-600 text-white px-5 py-2 rounded-md hover:bg-red-700 transition">استعادة قاعدة بيانات</button>
      `;

      container.appendChild(dbDiv);
    }
  }

  // Admin support tabs content
  function renderAdminSupportTab(tabKey, container) {
    container.innerHTML = '';
    if (tabKey === 'support-requests') {
      const requestsDiv = document.createElement('div');
      requestsDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      requestsDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">متابعة طلبات الدعم من المستخدمين</h3>
        <table class="min-w-full text-right text-gray-700">
          <thead class="bg-indigo-100">
            <tr>
              <th class="px-4 py-2">المستخدم</th>
              <th class="px-4 py-2">الموضوع</th>
              <th class="px-4 py-2">الحالة</th>
              <th class="px-4 py-2">الإجراءات</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">محمد علي</td>
              <td class="px-4 py-2">مشكلة في تسجيل الدخول</td>
              <td class="px-4 py-2">قيد المعالجة</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">عرض التفاصيل</button>
              </td>
            </tr>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">سارة أحمد</td>
              <td class="px-4 py-2">طلب إضافة مقرر جديد</td>
              <td class="px-4 py-2">مغلقة</td>
              <td class="px-4 py-2">
                <button class="text-indigo-600 hover:underline">عرض التفاصيل</button>
              </td>
            </tr>
          </tbody>
        </table>
      `;

      container.appendChild(requestsDiv);
    } else if (tabKey === 'technical-solutions') {
      const solutionsDiv = document.createElement('div');
      solutionsDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      solutionsDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">إدارة الحلول التقنية</h3>
        <p class="text-gray-600">يمكنك إضافة وتحديث الحلول التقنية لمشاكل المستخدمين.</p>
        <button class="mt-4 bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إضافة حل جديد</button>
      `;

      container.appendChild(solutionsDiv);
    }
  }

  // Student content pages
  function renderStudentContent(key) {
    mainContent.innerHTML = '';
    const container = document.createElement('div');
    container.className = 'space-y-6';

    if (key === 'content-access') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'الوصول إلى المحتوى الدراسي';
      container.appendChild(title);

      // List of lectures and videos
      const contentSection = document.createElement('section');
      contentSection.className = 'bg-white rounded-lg shadow p-5';

      contentSection.innerHTML = `
        <h3 class="text-xl font-semibold mb-3 text-indigo-700">المحاضرات والفيديوهات</h3>
        <ul class="divide-y divide-gray-200">
          <li class="py-3 flex items-center justify-between">
            <div class="flex items-center space-x-3 rtl:space-x-reverse">
              <img src="https://placehold.co/80x60/png?text=Lecture+1" alt="صورة مصغرة لمحاضرة بعنوان مقدمة في البرمجة مع رمز فيديو" class="rounded-md" />
              <span class="font-medium text-gray-700">محاضرة 1: مقدمة في البرمجة</span>
            </div>
            <a href="#" class="text-indigo-600 hover:underline">مشاهدة</a>
          </li>
          <li class="py-3 flex items-center justify-between">
            <div class="flex items-center space-x-3 rtl:space-x-reverse">
              <img src="https://placehold.co/80x60/png?text=Video+2" alt="صورة مصغرة لفيديو تعليمي بعنوان هياكل البيانات مع رمز فيديو" class="rounded-md" />
              <span class="font-medium text-gray-700">فيديو 2: هياكل البيانات</span>
            </div>
            <a href="#" class="text-indigo-600 hover:underline">مشاهدة</a>
          </li>
          <li class="py-3 flex items-center justify-between">
            <div class="flex items-center space-x-3 rtl:space-x-reverse">
              <img src="https://placehold.co/80x60/png?text=Presentation+3" alt="صورة مصغرة لعرض تقديمي بعنوان قواعد البيانات مع رمز ملف PDF" class="rounded-md" />
              <span class="font-medium text-gray-700">عرض 3: قواعد البيانات</span>
            </div>
            <a href="#" class="text-indigo-600 hover:underline">تحميل</a>
          </li>
        </ul>
      `;

      container.appendChild(contentSection);
    } else if (key === 'browse-lectures') {
      // Same as content-access for simplicity
      renderStudentContent('content-access');
      return;
    } else if (key === 'download-resources') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'تنزيل الملفات والمصادر';
      container.appendChild(title);

      const resourcesSection = document.createElement('section');
      resourcesSection.className = 'bg-white rounded-lg shadow p-5';

      resourcesSection.innerHTML = `
        <ul class="divide-y divide-gray-200">
          <li class="py-3 flex items-center justify-between">
            <span class="font-medium text-gray-700">ملف PDF: دليل الطالب</span>
            <a href="#" class="text-indigo-600 hover:underline">تحميل</a>
          </li>
          <li class="py-3 flex items-center justify-between">
            <span class="font-medium text-gray-700">ملف ZIP: مصادر المقرر</span>
            <a href="#" class="text-indigo-600 hover:underline">تحميل</a>
          </li>
        </ul>
      `;

      container.appendChild(resourcesSection);
    } else if (key === 'progress-tracking') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'متابعة تقدم الدروس';
      container.appendChild(title);

      const progressSection = document.createElement('section');
      progressSection.className = 'bg-white rounded-lg shadow p-5';

      progressSection.innerHTML = `
        <ul class="space-y-4">
          <li>
            <div class="flex justify-between mb-1">
              <span class="font-medium text-gray-700">مقدمة في البرمجة</span>
              <span class="text-sm text-gray-600">75%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
              <div class="bg-indigo-600 h-3 rounded-full" style="width: 75%;"></div>
            </div>
          </li>
          <li>
            <div class="flex justify-between mb-1">
              <span class="font-medium text-gray-700">هياكل البيانات</span>
              <span class="text-sm text-gray-600">40%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
              <div class="bg-indigo-600 h-3 rounded-full" style="width: 40%;"></div>
            </div>
          </li>
          <li>
            <div class="flex justify-between mb-1">
              <span class="font-medium text-gray-700">قواعد البيانات</span>
              <span class="text-sm text-gray-600">60%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
              <div class="bg-indigo-600 h-3 rounded-full" style="width: 60%;"></div>
            </div>
          </li>
        </ul>
      `;

      container.appendChild(progressSection);
    } else if (key === 'assignments-tests') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'الواجبات والاختبارات';
      container.appendChild(title);

      const assignmentsSection = document.createElement('section');
      assignmentsSection.className = 'bg-white rounded-lg shadow p-5';

      assignmentsSection.innerHTML = `
        <ul class="divide-y divide-gray-200">
          <li class="py-3 flex flex-col sm:flex-row sm:justify-between sm:items-center">
            <div>
              <span class="font-medium text-gray-700">واجب 3 في مقدمة في البرمجة</span>
              <p class="text-sm text-gray-500">تاريخ التسليم: 2024-06-15</p>
            </div>
            <div class="mt-2 sm:mt-0">
              <button class="bg-indigo-600 text-white px-4 py-1 rounded-md hover:bg-indigo-700 transition">رفع ملف</button>
            </div>
          </li>
          <li class="py-3 flex flex-col sm:flex-row sm:justify-between sm:items-center">
            <div>
              <span class="font-medium text-gray-700">اختبار منتصف الفصل في هياكل البيانات</span>
              <p class="text-sm text-gray-500">تاريخ الاختبار: 2024-06-20</p>
            </div>
            <div class="mt-2 sm:mt-0">
              <button class="bg-indigo-600 text-white px-4 py-1 rounded-md hover:bg-indigo-700 transition">عرض الدرجات</button>
            </div>
          </li>
        </ul>
      `;

      container.appendChild(assignmentsSection);
    } else if (key === 'view-tasks') {
      renderStudentContent('assignments-tests');
      return;
    } else if (key === 'upload-files') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'رفع الملفات';
      container.appendChild(title);

      const uploadSection = document.createElement('section');
      uploadSection.className = 'bg-white rounded-lg shadow p-5';

      uploadSection.innerHTML = `
        <form class="space-y-4">
          <div>
            <label for="assignment-select" class="block mb-2 font-semibold text-gray-700">اختر الواجب</label>
            <select id="assignment-select" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
              <option value="1">واجب 3 في مقدمة في البرمجة</option>
              <option value="2">اختبار منتصف الفصل في هياكل البيانات</option>
            </select>
          </div>
          <div>
            <label for="file-upload" class="block mb-2 font-semibold text-gray-700">رفع الملف</label>
            <input type="file" id="file-upload" class="w-full" />
          </div>
          <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">رفع الملف</button>
        </form>
      `;

      container.appendChild(uploadSection);
    } else if (key === 'grades-feedback') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'عرض الدرجات والملاحظات';
      container.appendChild(title);

      const gradesSection = document.createElement('section');
      gradesSection.className = 'bg-white rounded-lg shadow p-5';

      gradesSection.innerHTML = `
        <table class="min-w-full text-right text-gray-700">
          <thead class="bg-indigo-100">
            <tr>
              <th class="px-4 py-2">المقرر</th>
              <th class="px-4 py-2">الواجب/الاختبار</th>
              <th class="px-4 py-2">الدرجة</th>
              <th class="px-4 py-2">الملاحظات</th>
            </tr>
          </thead>
          <tbody>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">مقدمة في البرمجة</td>
              <td class="px-4 py-2">واجب 1</td>
              <td class="px-4 py-2">85%</td>
              <td class="px-4 py-2">جيد جداً</td>
            </tr>
            <tr class="border-b border-gray-200">
              <td class="px-4 py-2">هياكل البيانات</td>
              <td class="px-4 py-2">اختبار منتصف الفصل</td>
              <td class="px-4 py-2">90%</td>
              <td class="px-4 py-2">ممتاز</td>
            </tr>
          </tbody>
        </table>
      `;

      container.appendChild(gradesSection);
    } else if (key === 'academic-calendar') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'التقويم الأكاديمي';
      container.appendChild(title);

      const calendarSection = document.createElement('section');
      calendarSection.className = 'bg-white rounded-lg shadow p-5';

      calendarSection.innerHTML = `
        <ul class="divide-y divide-gray-200">
          <li class="py-3 flex justify-between">
            <span>محاضرة مقدمة في البرمجة</span>
            <span class="text-gray-500">2024-06-15 10:00 صباحاً</span>
          </li>
          <li class="py-3 flex justify-between">
            <span>اختبار منتصف الفصل في هياكل البيانات</span>
            <span class="text-gray-500">2024-06-20 02:00 مساءً</span>
          </li>
          <li class="py-3 flex justify-between">
            <span>تسليم واجب 3 في مقدمة في البرمجة</span>
            <span class="text-gray-500">2024-06-18</span>
          </li>
        </ul>
      `;

      container.appendChild(calendarSection);
    } else if (key === 'interaction') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'التفاعل والتواصل';
      container.appendChild(title);

      // Tabs for forums, contact faculty, announcements
      const tabs = document.createElement('div');
      tabs.className = 'flex space-x-4 rtl:space-x-reverse border-b border-gray-300 mb-4';

      const tabForums = document.createElement('button');
      tabForums.textContent = 'المشاركة في المنتديات';
      tabForums.className = 'py-2 px-4 border-b-2 border-indigo-600 text-indigo-600 font-semibold focus:outline-none';
      tabForums.dataset.tab = 'forums';

      const tabContact = document.createElement('button');
      tabContact.textContent = 'التواصل مع المدرسين';
      tabContact.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabContact.dataset.tab = 'contact-faculty';

      const tabAnnouncements = document.createElement('button');
      tabAnnouncements.textContent = 'استلام الإعلانات';
      tabAnnouncements.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabAnnouncements.dataset.tab = 'announcements';

      tabs.appendChild(tabForums);
      tabs.appendChild(tabContact);
      tabs.appendChild(tabAnnouncements);
      container.appendChild(tabs);

      const tabContent = document.createElement('div');
      tabContent.id = 'student-interaction-content';
      container.appendChild(tabContent);

      renderStudentInteractionTab('forums', tabContent);

      tabs.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          tabs.querySelectorAll('button').forEach(b => {
            b.classList.remove('border-indigo-600', 'text-indigo-600', 'font-semibold');
            b.classList.add('text-gray-600');
          });
          btn.classList.add('border-indigo-600', 'text-indigo-600', 'font-semibold');
          btn.classList.remove('text-gray-600');
          renderStudentInteractionTab(btn.dataset.tab, tabContent);
        });
      });
    } else if (key === 'forums') {
      renderStudentInteractionTab('forums', container);
      return;
    } else if (key === 'contact-faculty') {
      renderStudentInteractionTab('contact-faculty', container);
      return;
    } else if (key === 'announcements') {
      renderStudentInteractionTab('announcements', container);
      return;
    } else if (key === 'support') {
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'الدعم الفني';
      container.appendChild(title);

      // Tabs for FAQ and contact support
      const tabs = document.createElement('div');
      tabs.className = 'flex space-x-4 rtl:space-x-reverse border-b border-gray-300 mb-4';

      const tabFaq = document.createElement('button');
      tabFaq.textContent = 'الأسئلة الشائعة';
      tabFaq.className = 'py-2 px-4 border-b-2 border-indigo-600 text-indigo-600 font-semibold focus:outline-none';
      tabFaq.dataset.tab = 'faq';

      const tabContactSupport = document.createElement('button');
      tabContactSupport.textContent = 'التواصل مع فريق الدعم';
      tabContactSupport.className = 'py-2 px-4 text-gray-600 hover:text-indigo-600 focus:outline-none';
      tabContactSupport.dataset.tab = 'contact-support';

      tabs.appendChild(tabFaq);
      tabs.appendChild(tabContactSupport);
      container.appendChild(tabs);

      const tabContent = document.createElement('div');
      tabContent.id = 'student-support-content';
      container.appendChild(tabContent);

      renderStudentSupportTab('faq', tabContent);

      tabs.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('click', () => {
          tabs.querySelectorAll('button').forEach(b => {
            b.classList.remove('border-indigo-600', 'text-indigo-600', 'font-semibold');
            b.classList.add('text-gray-600');
          });
          btn.classList.add('border-indigo-600', 'text-indigo-600', 'font-semibold');
          btn.classList.remove('text-gray-600');
          renderStudentSupportTab(btn.dataset.tab, tabContent);
        });
      });
    } else if (key === 'faq') {
      renderStudentSupportTab('faq', container);
      return;
    } else if (key === 'contact-support') {
      renderStudentSupportTab('contact-support', container);
      return;
    } else {
      // Default fallback content
      const title = document.createElement('h2');
      title.className = 'text-2xl font-bold text-gray-800';
      title.textContent = 'المحتوى غير متوفر حالياً';
      container.appendChild(title);
    }

    mainContent.appendChild(container);
  }

  // Student interaction tabs content
  function renderStudentInteractionTab(tabKey, container) {
    container.innerHTML = '';
    if (tabKey === 'forums') {
      const forumsDiv = document.createElement('div');
      forumsDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      forumsDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">منتديات النقاش</h3>
        <ul class="divide-y divide-gray-200">
          <li class="py-3">
            <a href="#" class="text-indigo-600 hover:underline font-medium">منتدى مقرر مقدمة في البرمجة</a>
            <p class="text-gray-600 text-sm">نقاش حول المحاضرة الأولى</p>
          </li>
          <li class="py-3">
            <a href="#" class="text-indigo-600 hover:underline font-medium">منتدى هياكل البيانات</a>
            <p class="text-gray-600 text-sm">أسئلة حول الواجب الثاني</p>
          </li>
        </ul>
        <button class="mt-4 bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إنشاء موضوع جديد</button>
      `;

      container.appendChild(forumsDiv);
    } else if (tabKey === 'contact-faculty') {
      const contactDiv = document.createElement('div');
      contactDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      contactDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">التواصل مع المدرسين</h3>
        <form class="space-y-4">
          <div>
            <label for="faculty-select" class="block mb-2 font-semibold text-gray-700">اختر المدرس</label>
            <select id="faculty-select" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
              <option value="1">أحمد محمد</option>
              <option value="2">ليلى خالد</option>
            </select>
          </div>
          <div>
            <label for="message-text" class="block mb-2 font-semibold text-gray-700">الرسالة</label>
            <textarea id="message-text" rows="4" placeholder="اكتب رسالتك هنا..." class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
          </div>
          <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إرسال الرسالة</button>
        </form>
      `;

      container.appendChild(contactDiv);
    } else if (tabKey === 'announcements') {
      const announcementsDiv = document.createElement('div');
      announcementsDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      announcementsDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">الإعلانات</h3>
        <ul class="divide-y divide-gray-200">
          <li class="py-3">
            <p class="text-gray-700 font-medium">تم تحديث موعد الاختبار النهائي</p>
            <p class="text-gray-500 text-sm">2024-06-10</p>
          </li>
          <li class="py-3">
            <p class="text-gray-700 font-medium">تم نشر محاضرة جديدة في مقرر قواعد البيانات</p>
            <p class="text-gray-500 text-sm">2024-06-08</p>
          </li>
        </ul>
      `;

      container.appendChild(announcementsDiv);
    }
  }

  // Student support tabs content
  function renderStudentSupportTab(tabKey, container) {
    container.innerHTML = '';
    if (tabKey === 'faq') {
      const faqDiv = document.createElement('div');
      faqDiv.className = 'bg-white rounded-lg shadow p-5 space-y-4';

      const faqs = [
        { q: 'كيف أستطيع الوصول إلى المحاضرات؟', a: 'يمكنك الوصول إلى المحاضرات من خلال قسم المحتوى الدراسي.' },
        { q: 'كيف أرفع الواجبات؟', a: 'اذهب إلى قسم الواجبات والاختبارات ثم اختر رفع الملفات.' },
        { q: 'كيف أتواصل مع المدرسين؟', a: 'يمكنك استخدام قسم التفاعل والتواصل لإرسال الرسائل.' }
      ];

      faqDiv.innerHTML = `<h3 class="text-lg font-semibold text-gray-800 mb-3">الأسئلة الشائعة</h3>`;

      faqs.forEach(faq => {
        const item = document.createElement('div');
        item.className = 'border border-gray-200 rounded-md p-4';
        item.innerHTML = `
          <h4 class="font-semibold text-gray-700 mb-2">${faq.q}</h4>
          <p class="text-gray-600">${faq.a}</p>
        `;
        faqDiv.appendChild(item);
      });

      container.appendChild(faqDiv);
    } else if (tabKey === 'contact-support') {
      const contactDiv = document.createElement('div');
      contactDiv.className = 'bg-white rounded-lg shadow p-6 space-y-4';

      contactDiv.innerHTML = `
        <h3 class="text-lg font-semibold text-gray-800 mb-3">التواصل مع فريق الدعم</h3>
        <form class="space-y-4">
          <div>
            <label for="support-subject" class="block mb-2 font-semibold text-gray-700">الموضوع</label>
            <input type="text" id="support-subject" placeholder="أدخل موضوع الرسالة" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" />
          </div>
          <div>
            <label for="support-message" class="block mb-2 font-semibold text-gray-700">الرسالة</label>
            <textarea id="support-message" rows="5" placeholder="اكتب رسالتك هنا..." class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
          </div>
          <button type="submit" class="bg-indigo-600 text-white px-5 py-2 rounded-md hover:bg-indigo-700 transition">إرسال</button>
        </form>
      `;

      container.appendChild(contactDiv);
    }
  }

  // Toggle sidebar visibility on small screens
  sidebarToggle.addEventListener('click', () => {
    sidebarOpen = !sidebarOpen;
    if (sidebarOpen) {
      sidebar.classList.remove('-translate-x-full');
    } else {
      sidebar.classList.add('-translate-x-full');
    }
  });

  // User menu toggle
  userMenuBtn.addEventListener('click', e => {
    e.stopPropagation();
    userMenu.classList.toggle('hidden');
  });

  // Close user menu on outside click
  document.addEventListener('click', () => {
    if (!userMenu.classList.contains('hidden')) {
      userMenu.classList.add('hidden');
    }
  });

  // Logout button
  logoutBtn.addEventListener('click', () => {
    currentUser = null;
    app.classList.add('hidden');
    authScreen.classList.remove('hidden');
    // Reset forms and sidebar
    authForm.reset();
    forgotPasswordSection.classList.add('hidden');
    sidebar.querySelector('nav').innerHTML = '';
    mainContent.innerHTML = '';
  });

  // Forgot password toggle
  forgotPasswordBtn.addEventListener('click', () => {
    authForm.classList.add('hidden');
    forgotPasswordSection.classList.remove('hidden');
  });

  backToLoginBtn.addEventListener('click', () => {
    forgotPasswordSection.classList.add('hidden');
    authForm.classList.remove('hidden');
  });

  // Handle forgot password form submit
  forgotPasswordForm.addEventListener('submit', e => {
    e.preventDefault();
    alert('تم إرسال رابط استعادة الحساب إلى بريدك الإلكتروني.');
    forgotPasswordSection.classList.add('hidden');
    authForm.classList.remove('hidden');
  });

  // Handle login form submit
  authForm.addEventListener('submit', e => {
    e.preventDefault();
    const role = authForm.role.value;
    const email = authForm.email.value.trim();
    const password = authForm.password.value.trim();

    if (!role || !email || !password) {
      alert('يرجى ملء جميع الحقول.');
      return;
    }

    // Simulate login success
    currentUser = {
      role,
      name: 'أحمد محمد'
    };

    // Update UI
    authScreen.classList.add('hidden');
    app.classList.remove('hidden');

    // Update user name in header
    userMenuBtn.querySelector('span').textContent = currentUser.name;

    // Render sidebar and default content
    renderSidebar(role);
    renderContent(role, 'dashboard');

    // Show sidebar by default
    sidebar.classList.remove('-translate-x-full');
    sidebarOpen = true;
  });

  // Responsive sidebar initial state
  function handleResize() {
    if (window.innerWidth < 768) {
      sidebar.classList.add('-translate-x-full');
      sidebarOpen = false;
    } else {
      sidebar.classList.remove('-translate-x-full');
      sidebarOpen = true;
    }
  }
  window.addEventListener('resize', handleResize);
  handleResize();
  </script>
 </body>
</html>
